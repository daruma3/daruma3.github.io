<!DOCTYPE html>
<html lamg="ja">

<head>
    <title>EDPC_G</title>
    <script async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</head>

<body>
    <h1>EDPC G Longest Path</h1>
    <h2>問題概要</h2>
    <h3><a href="https://atcoder.jp/contests/dp/tasks/dp_g">問題</a></h3>
    <p>N頂点M辺の有向グラフGが与えられます．Gが閉路を含まないとき最長有向パスを求めてください．
    </p>


    <h2>方針</h2>
    <p>
        メモ化DFSをぶん回す．頂点がつながっていない場合があるのでDFSは全ての頂点に対しまわしてやる．
    </p>


    <h2>コード</h2>
    <div style="overflow:scroll;padding:0;background-color:margin:0;background-color:#EEF;width:100%;"><code>
<ol style="list-style:decimal-leading-zero outside;in-left:0;padding-left:36px;margin:0;background-color:#EEF;white-space: nowrap;color:#000;">
<li style="background-color:#EEF;">#include &lt;bits/stdc++.h&gt;</li>
<li style="background-color:#EFF;">using namespace std;</li>
<li style="background-color:#EEF;">typedef long long ll;</li>
<li style="background-color:#EFF;">const ll INF = 1e18;</li>
<li style="background-color:#EEF;">const int INT_INF = 1e9;</li>
<li style="background-color:#EFF;">const ll MOD = 1e9 + 7;</li>
<li style="background-color:#EEF;">#define rep(i, n) for(int i = 0; i &lt; n; i++)</li>
<li style="background-color:#EFF;">#define REP(i, n) for(int i = 0; i &lt;= n; i++)</li>
<li style="background-color:#EEF;">#define rrep(i,n) for(int i=n;i&gt;0;i--)</li>
<li style="background-color:#EFF;">#define RREP(i,n) for(int i=n;i&gt;=0;i--)</li>
<li style="background-color:#EEF;">typedef pair&lt;int, int&gt; Pi;</li>
<li style="background-color:#EFF;">typedef pair&lt;double, double&gt; P;</li>
<li style="background-color:#EEF;">using fint64 = int_fast64_t;</li>
<li style="background-color:#EFF;">vector&lt;int&gt; edge[100005];</li>
<li style="background-color:#EEF;">int dp[100005];</li>
<li style="background-color:#EFF;">int dfs(int i){</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;if(dp[i]&gt;0)return dp[i];</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if(edge[i].size()!=0){</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int res=-INT_INF;</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rep(k,edge[i].size()){</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int s=edge[i][k];</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res=max(dfs(s)+1,res);</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return dp[i]=res;</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
<li style="background-color:#EFF;">}</li>
<li style="background-color:#EEF;"></li>
<li style="background-color:#EFF;">int main() { </li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int n,m;cin&gt;&gt;n&gt;&gt;m;</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;rep(i,m){</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int x,y;cin&gt;&gt;x&gt;&gt;y;</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edge[x].push_back(y);</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;rep(i,100005) dp[i]=-INT_INF;</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;dp[0]=0;</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;dp[1]=0;</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int ans=-INT_INF;</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for(int i=1;i&lt;=n;i++) ans=max(ans,dfs(i));</li>
<li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;cout&lt;&lt;ans&lt;&lt;endl;</li>
<li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</li>
<li style="background-color:#EEF;">}</li>
<li style="background-color:#EFF;"></li>
</ol></code></div>

</body>